[tool.black]
line-length = 120
target-version = ['py310b']
include = '\.pyi?$'
exclude =  '''
/(
    \.eggs
    | \.git
    | \.hg
    | \.mypy_cache
    | \.pytest_cache
    | \.tox
    | \.vscode
    | __pycache__
    | _build
    | buck-out
    | build
    | dist
    | venv
)/
'''

[tool.ruff]
line-length = 120

[tool.ruff.per-file-ignores]
"app/api/api_v1/dependencies.py" = ["E501"]
"app/docs/api_docs/readme.py" = ["E501"]
"app/docs/api_docs/swagger_ui.py" = ["E501"]

[tool.isort]
profile = "black"
ensure_newline_before_comments = true
skip_gitignore = true
line_length = 120
multi_line_output = 3
use_parentheses = true
include_trailing_comma = true
force_alphabetical_sort_within_sections = true
color_output = true

[tool.pytest.ini_options]
addopts = "-ra --showlocals --cov=app --cov-report term:skip-covered --cov-branch --cov-report html -vv --cache-clear --random-order-bucket=package"
norecursedirs = [
    ".git",
    ".pytest_cache",
    ".vscode",
]

[tool.coverage.run]
omit = [
    "app/core/result.py",
    "app/data/scripts/*",
    "app/docs/*",
    "app/tests/*",
    "app/main.py",
    "app/tasks.py",
]

[tool.coverage.report]
skip_empty = true
exclude_lines = [
    "pragma: no cover",
    "def __repr__",
    "if self\\.debug",
    "raise AssertionError",
    "raise NotImplementedError",
    "if 0:",
    "if __name__ == .__main__.:",
    "def init_redis",
    "def init_unicode",
]

[tool.coverage.html]
directory = "coverage_html"